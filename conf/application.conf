# https://www.playframework.com/documentation/latest/Configuration
# Monolithic Application Configuration (Legacy)
# For microservices, see docker-compose.microservices.yml

# Application secret for production mode
play.application.secret=${?APPLICATION_SECRET}

# Module configuration
play.modules.enabled += "modules.DDDModule"

# Database configuration
db.default.driver=org.postgresql.Driver
db.default.url=${?DB_DEFAULT_URL}
db.default.username=${?DB_DEFAULT_USERNAME}
db.default.password=${?DB_DEFAULT_PASSWORD}

# Slick configuration
slick.dbs.default.profile="slick.jdbc.PostgresProfile$"
slick.dbs.default.db.driver="org.postgresql.Driver"
slick.dbs.default.db.url=${?DB_DEFAULT_URL}
slick.dbs.default.db.user=${?DB_DEFAULT_USERNAME}
slick.dbs.default.db.password=${?DB_DEFAULT_PASSWORD}
slick.dbs.default.db.numThreads=10
slick.dbs.default.db.maxConnections=10

# Database evolutions - disabled for now
play.evolutions.enabled=false
play.evolutions.db.default.autoApply=false

# Flyway migration configuration
flyway.url=${?DB_DEFAULT_URL}
flyway.user=${?DB_DEFAULT_USERNAME}
flyway.password=${?DB_DEFAULT_PASSWORD}
flyway.schemas=["public"]
flyway.locations=["filesystem:src/main/resources/db/migration"]

# CORS configuration - allow any origin for API development
play.filters.enabled += "play.filters.cors.CORSFilter"
play.filters.cors {
  allowedOrigins = null  # Allow any origin
  allowedHttpMethods = ["GET", "POST", "PUT", "DELETE", "OPTIONS", "PATCH"]
  allowedHttpHeaders = ["Accept", "Authorization", "Content-Type", "X-Requested-With", "Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers"]
  allowCredentials = true
  preflightMaxAge = 3 days
}
