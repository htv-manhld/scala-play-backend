# Analytics Service Configuration
play.application.secret="analytics-secret-key-must-be-at-least-sixty-four-characters-for-security"
play.application.secret=${?APPLICATION_SECRET}
play.environment="dev"
play.environment=${?PLAY_ENV}
play.http.secret.key="analytics-secret-key-must-be-at-least-sixty-four-characters-for-security"
play.http.secret.key=${?APPLICATION_SECRET}

# HTTP configuration
play.server.http.port=9003
play.server.http.port=${?HTTP_PORT}
play.server.http.address="0.0.0.0"

# Database configuration
slick.dbs.default.profile="slick.jdbc.PostgresProfile$"
slick.dbs.default.db.driver="org.postgresql.Driver"
slick.dbs.default.db.url="jdbc:postgresql://analytics-db:5432/analyticsdb"
slick.dbs.default.db.url=${?DB_URL}
slick.dbs.default.db.user="postgres"
slick.dbs.default.db.user=${?DB_USER}
slick.dbs.default.db.password="password"
slick.dbs.default.db.password=${?DB_PASSWORD}
slick.dbs.default.db.numThreads=10
slick.dbs.default.db.numThreads=${?DB_NUM_THREADS}
slick.dbs.default.db.maxConnections=10
slick.dbs.default.db.maxConnections=${?DB_MAX_CONNECTIONS}

# Enable Play evolutions
play.evolutions.enabled=true
play.evolutions.autoApply=true

# Dependency injection modules
play.modules.enabled += "modules.AnalyticsServiceModule"

# Health check
healthcheck.enabled=true

# Allow all hosts
play.filters.hosts.allowed = ["."]

# CORS configuration
play.filters.enabled += "play.filters.cors.CORSFilter"
play.filters.cors {
  allowedOrigins = null
  allowedHttpMethods = ["GET", "POST", "PUT", "DELETE", "OPTIONS", "PATCH"]
  allowedHttpHeaders = ["Accept", "Authorization", "Content-Type", "X-Requested-With", "Origin"]
  allowCredentials = true
  preflightMaxAge = 3 days
}

# Kafka configuration
kafka.bootstrap.servers="kafka:29092"
kafka.bootstrap.servers=${?KAFKA_BOOTSTRAP_SERVERS}
kafka.topic.domain-events="domain-events"
kafka.topic.domain-events=${?KAFKA_TOPIC_DOMAIN_EVENTS}
kafka.consumer.group-id="analytics-service-group"
kafka.consumer.group-id=${?KAFKA_CONSUMER_GROUP_ID}
